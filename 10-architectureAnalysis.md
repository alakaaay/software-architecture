# 10.	Анализ и описание архитектурных опций 

## Клиентское приложение 
| Опция | Преимущества | Недостатки | Что выбираем |
|-------|--------------|------------|---------------|
| Нативные iOS/Android (Swift/Kotlin) | Максимальная производительность и отзывчивость; полный доступ к сенсорам и API (GPS, BT, HealthKit, Google Fit); лучший UX | Два отдельных стека разработки, выше стоимость поддержки |+ |
| Кроссплатформа (Flutter/React Native) | Быстрая разработка одной кодовой базы; меньше затраты на поддержку | Ограниченный доступ к нативным сенсорам, возможны проблемы с производительностью и интеграцией HealthKit/Google Fit |  |
| PWA / веб-приложение | Дешевле в разработке; не требует установки; удобно для шеринга контента | Нет доступа к сенсорам и оффлайн-работе; слабее пользовательский опыт |  |
### Обоснование
Для спорта критичны сенсоры, фоновые процессы и UX → это надёжно реализуется только нативно. PWA нужен для промо и лёгкого доступа, кроссплатформа — для быстрых экспериментов.

## Архитектурный стиль
| Опция | Преимущества | Недостатки | Что выбираем |
|-------|--------------|------------|---------------|
| Монолит | Простая разработка и деплой, меньше накладных расходов | Трудно масштабировать, сложно вносить изменения при росте |  |
| Модульный монолит | Централизованное управление, чёткие домены внутри одного кода | Ограниченное масштабирование, со временем растёт сложность | |
| Микросервисы | Независимое масштабирование, быстрая эволюция, гибкая команда | Сложнее DevOps, выше требования к инфраструктуре |+ |

### Обоснование
Монолит прост для старта, но не подходит под глобальный рост. Для MVP можно использовать модульный монолит, а затем выделять микросервисы по доменам. Основная стратегия — микросервисная архитектура.

## Хранение данных — реляционные и нереляционные БД
| Опция | Преимущества | Недостатки | Что выбираем |
|-------|--------------|------------|---------------|
| Реляционные (PostgreSQL, MySQL) | ACID-транзакции, зрелая экосистема, удобны для связных данных (профили, соц.граф) | Сложнее масштабировать горизонтально, не оптимальны для больших объёмов телеметрии | +|
| Нереляционные (MongoDB, Cassandra, DynamoDB) | Гибкая схема, легко масштабируются, хорошо для событийных/временных рядов | Нет строгих ACID, сложнее реализовать сложные связи |  |
### Обоснование
Для профилей, соц.связей и транзакций нужны гарантии → реляционные БД (PostgreSQL).
Для тренировочных данных (временные ряды, метрики) удобнее нереляционные (например, ClickHouse или Cassandra).

## API слой 

| Опция | Преимущества | Недостатки | Что выбираем |
|-------|--------------|------------|---------------|
| Только REST API | Простота, широкая поддержка, легко интегрировать | Избыточные запросы у мобильных клиентов, нет гибкой агрегации | |
| Только GraphQL | Гибкость, один запрос = нужные данные, удобен для мобильных | Более сложная реализация, кэширование и безопасность сложнее | |
| API Gateway + BFF | Централизованный контроль (auth, rate-limit), адаптация под клиента, унификация | Более сложная инфраструктура | + |
### Обоснование
REST хорош для базовых операций, GraphQL — для агрегирующих экранов (лента, статистика). Но ключевое — API Gateway + BFF, чтобы разгружать клиентов, обеспечивать безопасность и гибко управлять API.
